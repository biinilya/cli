<!-- Code generated by gomarkdoc. DO NOT EDIT -->

# auth

```go
import "github.com/forestvpn/cli/auth"
```

auth is a package containing an authentication client built around Firebase REST API.

See https://firebase.google.com/docs/reference/rest for more information.

fields is a package containing structures for storing user prompted data such as email or password.

forms is package contaning structures to work with user input during Firebase authentication process.

Authentication related utilities around firebase REST authentication workflow. See https://firebase.google.com/docs/reference/rest for more information.

## Index

- [Variables](<#variables>)
- [func BuyPremiumDialog() error](<#func-buypremiumdialog>)
- [func HandleFirebaseAuthResponse(response *resty.Response) error](<#func-handlefirebaseauthresponse>)
- [func HandleFirebaseSignInResponse(response *resty.Response) error](<#func-handlefirebasesigninresponse>)
- [func Init() error](<#func-init>)
- [func IsAuthenticated() bool](<#func-isauthenticated>)
- [func IsDeviceCreated() bool](<#func-isdevicecreated>)
- [func IsLocationSet() bool](<#func-islocationset>)
- [func IsRefreshTokenExists() bool](<#func-isrefreshtokenexists>)
- [func JsonDump(data []byte, filepath string) error](<#func-jsondump>)
- [func JsonLoad(filepath string) (map[string]string, error)](<#func-jsonload>)
- [func LoadAccessToken() (string, error)](<#func-loadaccesstoken>)
- [func LoadDeviceID() (string, error)](<#func-loaddeviceid>)
- [func LoadRefreshToken() (string, error)](<#func-loadrefreshtoken>)
- [type AuthClient](<#type-authclient>)
  - [func (c AuthClient) ExchangeRefreshForIdToken(refreshToken string) (*resty.Response, error)](<#func-authclient-exchangerefreshforidtoken>)
  - [func (c AuthClient) GetAccessToken() (*resty.Response, error)](<#func-authclient-getaccesstoken>)
  - [func (c AuthClient) GetUserData(email string) (*resty.Response, error)](<#func-authclient-getuserdata>)
  - [func (c AuthClient) SignIn(form SignInForm) (*resty.Response, error)](<#func-authclient-signin>)
  - [func (c AuthClient) SignUp(form SignUpForm) (*resty.Response, error)](<#func-authclient-signup>)
- [type EmailField](<#type-emailfield>)
  - [func GetEmailField(email string) (EmailField, error)](<#func-getemailfield>)
  - [func (f EmailField) Validate() error](<#func-emailfield-validate>)
- [type Info](<#type-info>)
- [type InfoForm](<#type-infoform>)
- [type PasswordConfirmationField](<#type-passwordconfirmationfield>)
- [type PasswordField](<#type-passwordfield>)
  - [func GetPasswordField(password []byte) (PasswordField, error)](<#func-getpasswordfield>)
  - [func (p PasswordField) Validate() error](<#func-passwordfield-validate>)
- [type SignInForm](<#type-signinform>)
- [type SignUpForm](<#type-signupform>)
  - [func (s SignUpForm) ValidatePasswordConfirmation() error](<#func-signupform-validatepasswordconfirmation>)


## Variables

AppDir is Forest CLI application directory.

```go
var AppDir = home + "/.forestvpn/"
```

Client is a REST client for Go.

See https://github.com/go-resty/resty for more information.

```go
var Client = resty.New()
```

The DeviceFile represents the device created for the user.

Read more: https://github.com/forestvpn/api-client-go.

```go
var DeviceFile = AppDir + "device.json"
```

FirebaseAuthFile is a file to dump Firebase responses.

```go
var FirebaseAuthFile = AppDir + "firebase.json"
```

The SessionFile is a file for storing the last session information.

It's used to track down the status of connection.

```go
var SessionFile = AppDir + "session.json"
```

WireguardConfig is a Wireguard configuration file.

It's being rewrittten per location change.

```go
var WireguardConfig = AppDir + "fvpn0.conf"
```

## func [BuyPremiumDialog](<https://github.com/forestvpn/cli/blob/main/src/auth/utils.go#L175>)

```go
func BuyPremiumDialog() error
```

BuyPremiumDialog is a function that prompts the user to by premium subscrition on Forest VPN. If the user prompts 'yes', then it opens https://forestvpn.com/pricing/ page in the default browser.

## func [HandleFirebaseAuthResponse](<https://github.com/forestvpn/cli/blob/main/src/auth/utils.go#L108>)

```go
func HandleFirebaseAuthResponse(response *resty.Response) error
```

HandleFirebaseAuthResponse is a function to extracts the error message from the Firebase REST API response when the status is ok.

## func [HandleFirebaseSignInResponse](<https://github.com/forestvpn/cli/blob/main/src/auth/utils.go#L119>)

```go
func HandleFirebaseSignInResponse(response *resty.Response) error
```

HandleFirebaseSignInResponse is a function that dumps the Firebase REST API response into FirebaseAuthFile.

## func [Init](<https://github.com/forestvpn/cli/blob/main/src/auth/utils.go#L42>)

```go
func Init() error
```

Init is a function that creates directories structure for Forest CLI.

## func [IsAuthenticated](<https://github.com/forestvpn/cli/blob/main/src/auth/utils.go#L201>)

```go
func IsAuthenticated() bool
```

IsAuthenticated is a helper function to quickly check wether user is authenticated by checking existance of an access token.

## func [IsDeviceCreated](<https://github.com/forestvpn/cli/blob/main/src/auth/utils.go#L158>)

```go
func IsDeviceCreated() bool
```

Deprecated: IsDeviceCreated is a function that checks if the DeviceFile exist, i.e device is created.

## func [IsLocationSet](<https://github.com/forestvpn/cli/blob/main/src/auth/utils.go#L214>)

```go
func IsLocationSet() bool
```

IsLocationSet is a function to check wether Wireguard configuration file created after location selection.

## func [IsRefreshTokenExists](<https://github.com/forestvpn/cli/blob/main/src/auth/utils.go#L152>)

```go
func IsRefreshTokenExists() bool
```

IsRefreshTokenExists is a function to quickly check refresh token exists locally.

## func [JsonDump](<https://github.com/forestvpn/cli/blob/main/src/auth/utils.go#L50>)

```go
func JsonDump(data []byte, filepath string) error
```

JsonDump is a function that dumps the json data into the file at filepath.

## func [JsonLoad](<https://github.com/forestvpn/cli/blob/main/src/auth/utils.go#L85>)

```go
func JsonLoad(filepath string) (map[string]string, error)
```

JsonLoad  is a function that reads the content of a file and unmarshals it into the map. If there's no file or it is empty, returns an empty map.

## func [LoadAccessToken](<https://github.com/forestvpn/cli/blob/main/src/auth/utils.go#L103>)

```go
func LoadAccessToken() (string, error)
```

LoadAccessToken is a function to quickly get the local access token from FirebaseAuthFile.

## func [LoadDeviceID](<https://github.com/forestvpn/cli/blob/main/src/auth/utils.go#L164>)

```go
func LoadDeviceID() (string, error)
```

LoadDeviceID is a function to quickly get the device ID from the DeviceFile.

## func [LoadRefreshToken](<https://github.com/forestvpn/cli/blob/main/src/auth/utils.go#L130>)

```go
func LoadRefreshToken() (string, error)
```

LoadRefreshToken is a function to quickly get the local refresh token from FirebaseAuthFile.

## type [AuthClient](<https://github.com/forestvpn/cli/blob/main/src/auth/auth.go#L23-L25>)

AuthClient is a structure used as a Firebase REST client.

See https://firebase.google.com/docs/reference/rest for more information.

```go
type AuthClient struct {
    ApiKey string
}
```

### func \(AuthClient\) [ExchangeRefreshForIdToken](<https://github.com/forestvpn/cli/blob/main/src/auth/auth.go#L85>)

```go
func (c AuthClient) ExchangeRefreshForIdToken(refreshToken string) (*resty.Response, error)
```

See https://firebase.google.com/docs/reference/rest/auth#section-refresh-token for more information.

### func \(AuthClient\) [GetAccessToken](<https://github.com/forestvpn/cli/blob/main/src/auth/auth.go#L100>)

```go
func (c AuthClient) GetAccessToken() (*resty.Response, error)
```

GetAccessToken is a method to obtain a new access token from Firebase REST API and dump the response into FirebaseAuthFile.

### func \(AuthClient\) [GetUserData](<https://github.com/forestvpn/cli/blob/main/src/auth/auth.go#L119>)

```go
func (c AuthClient) GetUserData(email string) (*resty.Response, error)
```

GetUserInfo is used to check if the user already exists in the Firebase database during the registration.

See https://firebase.google.com/docs/reference/rest/auth#section-get-account-info for more information.

### func \(AuthClient\) [SignIn](<https://github.com/forestvpn/cli/blob/main/src/auth/auth.go#L62>)

```go
func (c AuthClient) SignIn(form SignInForm) (*resty.Response, error)
```

SignIn is a method to perform a Firebase sign in request. It accepts an instance of a SignInForm that holds validated data for request.

See https://firebase.google.com/docs/reference/rest/auth#section-sign-in-email-password for more information.

### func \(AuthClient\) [SignUp](<https://github.com/forestvpn/cli/blob/main/src/auth/auth.go#L37>)

```go
func (c AuthClient) SignUp(form SignUpForm) (*resty.Response, error)
```

SignUp is a method to perform a Firebase sign up request. It accepts an instance of a SignUpForm that holds validated data for request.

See https://firebase.google.com/docs/reference/rest/auth#section-create-email-password for more information.

## type [EmailField](<https://github.com/forestvpn/cli/blob/main/src/auth/fields.go#L10-L12>)

EmailField is a structure that holds an email value that could be validated.

```go
type EmailField struct {
    Value string
}
```

### func [GetEmailField](<https://github.com/forestvpn/cli/blob/main/src/auth/forms.go#L69>)

```go
func GetEmailField(email string) (EmailField, error)
```

GetEmailField is a method that prompts a user an email and then validates it.

### func \(EmailField\) [Validate](<https://github.com/forestvpn/cli/blob/main/src/auth/fields.go#L25>)

```go
func (f EmailField) Validate() error
```

Validate is a method to check user's email address.

## type [Info](<https://github.com/forestvpn/cli/blob/main/src/auth/forms.go#L26-L28>)

```go
type Info struct {
    AdditionalProperties string
}
```

## type [InfoForm](<https://github.com/forestvpn/cli/blob/main/src/auth/forms.go#L30-L33>)

```go
type InfoForm struct {
    Type string
    Info Info
}
```

## type [PasswordConfirmationField](<https://github.com/forestvpn/cli/blob/main/src/auth/fields.go#L20-L22>)

PasswordConfirmationField is used in the SignUpForm to store the confirmation of a password.

```go
type PasswordConfirmationField struct {
    Value []byte
}
```

## type [PasswordField](<https://github.com/forestvpn/cli/blob/main/src/auth/fields.go#L15-L17>)

PasswordField is a structure that holds a password value that could be validated.

```go
type PasswordField struct {
    Value []byte
}
```

### func [GetPasswordField](<https://github.com/forestvpn/cli/blob/main/src/auth/forms.go#L44>)

```go
func GetPasswordField(password []byte) (PasswordField, error)
```

getPasswordField is a method that prompts the user a password and then validates it.

### func \(PasswordField\) [Validate](<https://github.com/forestvpn/cli/blob/main/src/auth/fields.go#L34>)

```go
func (p PasswordField) Validate() error
```

Validate is a method to check password's strength.

## type [SignInForm](<https://github.com/forestvpn/cli/blob/main/src/auth/forms.go#L15-L18>)

SignInForm is a structure to store user's email and password.

```go
type SignInForm struct {
    EmailField
    PasswordField
}
```

## type [SignUpForm](<https://github.com/forestvpn/cli/blob/main/src/auth/forms.go#L21-L24>)

SignUpForm is a structure that holds the SignInForm and the password confirmation.

```go
type SignUpForm struct {
    SignInForm
    PasswordConfirmationField
}
```

### func \(SignUpForm\) [ValidatePasswordConfirmation](<https://github.com/forestvpn/cli/blob/main/src/auth/forms.go#L36>)

```go
func (s SignUpForm) ValidatePasswordConfirmation() error
```

ValidatePasswordConfirmation is a method that compares password and the password confirmation values.



Generated by [gomarkdoc](<https://github.com/princjef/gomarkdoc>)
